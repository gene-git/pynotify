<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>pynotify &#8212; pynotify 1.7.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <script src="_static/documentation_options.js?v=030dc6f6"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="License" href="License/License.html" />
    <link rel="prev" title="pynotify documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pynotify">
<h1>pynotify<a class="headerlink" href="#pynotify" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>pynotify : Python inotify implementation built atop standard C-library.</p>
</section>
<section id="key-features">
<h2>Key features<a class="headerlink" href="#key-features" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Provides a python class to monitor 1 or more file paths for inotify events.</p></li>
<li><p>All git tags are signed with <a class="reference external" href="mailto:arch&#37;&#52;&#48;sapience&#46;com">arch<span>&#64;</span>sapience<span>&#46;</span>com</a> key which is available via WKD
or download from <a class="reference external" href="https://www.sapience.com/tech">https://www.sapience.com/tech</a>. Add the key to your package builder gpg keyring.
The key is included in the Arch package and the source= line with <em>?signed</em> at the end can be used
to verify the git tag.  You can also manually verify the signature.</p></li>
</ul>
</section>
<section id="new-interesting">
<h2>New / Interesting<a class="headerlink" href="#new-interesting" title="Link to this heading">¶</a></h2>
<p><strong>1.7.0</strong></p>
<ul class="simple">
<li><p>Switch packaging from hatch to uv</p></li>
</ul>
<p><strong>Older</strong></p>
<ul class="simple">
<li><p>License switch to GPL-2.0-or-later.</p></li>
<li><p>Improve API reference documentation</p></li>
<li><p>Tidy ups: PEP-8, PEP-257, PEP-484 PEP-561</p></li>
<li><p>improve reference API doc.</p></li>
</ul>
</section>
</section>
<section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h1>
<p>A simple test program is available in the examples directory. The program
monitors <em>/tmp/xxx</em> - this can be a file or a directory.  To get a quick idea
in one terminal do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>/tmp/xxx
./examples/test_inotify.py
</pre></div>
</div>
<p>In another terminal do something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch<span class="w"> </span>/tmp/xxx/A
touch<span class="w"> </span>/tmp/xxx/B
rm<span class="w"> </span>/tmp/xxx/*
rmdir<span class="w"> </span>/tmp/xxx
</pre></div>
</div>
<p>What the code does is essentialy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>from<span class="w"> </span>pynotify<span class="w"> </span>import<span class="w"> </span>Inotify
<span class="nv">inotify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Inotify<span class="o">()</span>
inotify.add_watch<span class="o">(</span><span class="s1">&#39;/tmp/xxx&#39;</span><span class="o">)</span>

<span class="k">for</span><span class="w"> </span>events<span class="w"> </span><span class="k">in</span><span class="w"> </span>inotify.get_events<span class="o">()</span>:
<span class="w">     </span><span class="k">for</span><span class="w"> </span>event<span class="w"> </span><span class="k">in</span><span class="w"> </span>events:
<span class="w">         </span><span class="k">if</span><span class="w"> </span>event:
<span class="w">             </span>print<span class="o">(</span>..<span class="o">)</span>
</pre></div>
</div>
<p>The first loop uses get_events() method which is an iterator that returns a list of events.
Each even in the list provides for:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>event.wd            # the watch descriptor
event.mask          # the event mask
event.event_types   # list of event type enums from the mask
event.path          # the path being watched (/tmp/xxx)
event.file          # Possible subordinate file (/tmp/xxx/A)
</pre></div>
</div>
<p>Thats it in a nutshell. add_watch takes one optional argument:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Inotify.add_watch(*path*, mask=xxx)
</pre></div>
</div>
<p><em>add_watch()</em> returns the watched descriptor, <em>wd</em>. If successful wd is &gt;= 0.
If &lt; 0 then it means the path is non-existent.</p>
<p>If not provided then the watch is for all possible event types.
Where mask are event types from the enum <em>InotifyMask.IN_xxx</em>. These event elements are the same
as provided in <em>/usr/include/sys/inotify.h</em>.</p>
<p>Before calling get_events() there is one additionl attribute that can be set on an instance
of Inotify which is a select timeout which defaults to 5 seconds.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>inotify.timeout
</pre></div>
</div>
<p>The timeout is passed down to <em>select()</em> which waits on the inotify file desriptor for events to provided.
If its negative then the select will wait forever, if no events occur.
Otherwise the select loop will break after the timeout. A value of zero causes select to return
immediately. The default value should provide reasonable behaviour.</p>
<section id="mask-flags">
<h2>Mask Flags<a class="headerlink" href="#mask-flags" title="Link to this heading">¶</a></h2>
<p>You can get the full list of possible mask flags reading code, which has comments, or using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pynotify</span><span class="w"> </span><span class="kn">import</span> <span class="n">InotifyMask</span><span class="p">,</span> <span class="n">Inotify</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">InotifyMask</span><span class="o">.</span><span class="n">mask_to_events</span><span class="p">(</span><span class="mh">0xFFFFFFFF</span><span class="p">):</span>
     <span class="n">item</span>
</pre></div>
</div>
<p>This currently outputs the following where we have manually added comments:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;InotifyMask.IN_ACCESS: 1&gt;              # File was accessed
&lt;InotifyMask.IN_MODIFY: 2&gt;              # File was modified.
&lt;InotifyMask.IN_ATTRIB: 4&gt;              # Metadata changed.
&lt;InotifyMask.IN_CLOSE_WRITE: 8&gt;         # Writtable file was closed.
&lt;InotifyMask.IN_CLOSE_NOWRITE: 16&gt;      # Unwrittable file closed.
&lt;InotifyMask.IN_CLOSE: 24&gt;              # File closed
&lt;InotifyMask.IN_OPEN: 32&gt;               # File was opened.
&lt;InotifyMask.IN_MOVED_FROM: 64&gt;         # File was moved from X.
&lt;InotifyMask.IN_MOVED_TO: 128&gt;          # File was moved to Y.
&lt;InotifyMask.IN_MOVE: 192&gt;              # File was moved
&lt;InotifyMask.IN_CREATE: 256&gt;            # Subfile was created.
&lt;InotifyMask.IN_DELETE: 512&gt;            # Subfile was deleted.
&lt;InotifyMask.IN_DELETE_SELF: 1024&gt;      # Self was deleted.
&lt;InotifyMask.IN_MOVE_SELF: 2048&gt;        # Self was moved.
&lt;InotifyMask.IN_UNMOUNT: 8192&gt;          # Backing fs was unmounted.
&lt;InotifyMask.IN_Q_OVERFLOW: 16384&gt;      # Event queue overflowed.
&lt;InotifyMask.IN_IGNORED: 32768&gt;         # File was ignored.
&lt;InotifyMask.IN_ONLYDIR: 16777216&gt;      # Only watch the path if it is a directory.
&lt;InotifyMask.IN_DONT_FOLLOW: 33554432&gt;  # Do not follow a sym link.
&lt;InotifyMask.IN_EXCL_UNLINK: 67108864&gt;  # Exclude events on unlinked objects.
&lt;InotifyMask.IN_MASK_CREATE: 268435456&gt; # Only create watches.
&lt;InotifyMask.IN_MASK_ADD: 536870912&gt;    # Add to the mask of an already existing watch.
&lt;InotifyMask.IN_ISDIR: 1073741824&gt;      # Event occurred against dir.
&lt;InotifyMask.IN_ONESHOT: 2147483648&gt;    # Only send event once.
&lt;InotifyMask.IN_ALL_EVENTS: 4095&gt;       # All events which that can be waited on.
</pre></div>
</div>
</section>
</section>
<section id="appendix">
<h1>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">¶</a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Available on</dt><dd><ul class="simple">
<li><p><a class="reference external" href="https://github.com/gene-git/pynotify">Github</a></p></li>
<li><p><a class="reference external" href="https://aur.archlinux.org/packages/python-pynotify">Archlinux AUR</a></p></li>
</ul>
</dd>
</dl>
<p>On Arch you can build using the provided PKGBUILD in the packaging directory or from the AUR.
To build manually, clone the repo and :</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>-f<span class="w"> </span>dist/*
/usr/bin/python<span class="w"> </span>-m<span class="w"> </span>build<span class="w"> </span>--wheel<span class="w"> </span>--no-isolation
<span class="nv">root_dest</span><span class="o">=</span><span class="s2">&quot;/&quot;</span>
./scripts/do-install<span class="w"> </span><span class="nv">$root_dest</span>
</pre></div>
</div>
</div></blockquote>
<p>When running as non-root then set root_dest a user writable directory</p>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading">¶</a></h2>
<p><strong>Run Time</strong> :</p>
<ul class="simple">
<li><p>python          (3.13 or later)</p></li>
</ul>
<p><strong>Building Package</strong> :</p>
<ul class="simple">
<li><p>git</p></li>
<li><p>uv</p></li>
<li><p>uv-build        (aka python-uv-build)</p></li>
<li><p>rsync</p></li>
<li><p>pytest          (aka python-pytest)</p></li>
<li><p>pytest-asyncio  (aka python-pytest-asyncio)</p></li>
</ul>
<p><strong>Optional for building docs</strong> :</p>
<ul class="simple">
<li><p>sphinx</p></li>
<li><p>texlive-latexextra  (archlinux packaguing of texlive tools)</p></li>
</ul>
</section>
<section id="philosophy">
<h2>Philosophy<a class="headerlink" href="#philosophy" title="Link to this heading">¶</a></h2>
<p>We follow the <em>live at head commit</em> philosophy as recommended by
Google’s Abseil team <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.  This means we recommend using the
latest commit on git master branch.</p>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading">¶</a></h2>
<p>Created by Gene C. and licensed under the terms of the GPL-2.0-or-later license.</p>
<ul class="simple">
<li><p>SPDX-License-Identifier: GPL-2.0-or-later</p></li>
<li><p>SPDX-FileCopyrightText: © 2023-present Gene C &lt;<a class="reference external" href="mailto:arch&#37;&#52;&#48;sapience&#46;com">arch<span>&#64;</span>sapience<span>&#46;</span>com</a>&gt;</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://abseil.io/about/philosophy#upgrade-support">https://abseil.io/about/philosophy#upgrade-support</a></p>
</aside>
</aside>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pynotify</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">pynotify</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-features">Key features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#new-interesting">New / Interesting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mask-flags">Mask Flags</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#appendix">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#philosophy">Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="License/License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">pynotify documentation</a></li>
      <li>Next: <a href="License/License.html" title="next chapter">License</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023-present, Gene C.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/README.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>